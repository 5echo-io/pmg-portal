{% extends "admin_app/base.html" %}

{% block admin_title %}{% if facility %}Edit facility{% else %}Add facility{% endif %}{% endblock %}
{% block breadcrumb_extra %}
<span class="breadcrumb-sep">→</span> <a href="{% url 'admin_app:admin_facility_list' %}">Facilities</a>
<span class="breadcrumb-sep">→</span> <span>{% if facility %}Edit{% else %}Add{% endif %}</span>
{% endblock %}

{% block admin_content %}
<h1 class="admin-page-title">{% if facility %}Edit facility{% else %}Add facility{% endif %}</h1>

<form method="post" action="" class="admin-form admin-form--wide">
  {% csrf_token %}
  <div class="admin-form-row">
    <div class="admin-form-field">
      <label for="{{ form.name.id_for_label }}">{{ form.name.label }}</label>
      {{ form.name }}
      {% if form.name.help_text %}<p class="admin-form-help">{{ form.name.help_text|escape }}</p>{% endif %}
      {% if form.name.errors %}<p class="form-error">{{ form.name.errors.0 }}</p>{% endif %}
    </div>
    <div class="admin-form-field">
      <label for="{{ form.slug.id_for_label }}">{{ form.slug.label }}</label>
      {{ form.slug }}
      {% if form.slug.help_text %}<p class="admin-form-help">{{ form.slug.help_text|escape }}</p>{% endif %}
      {% if form.slug.errors %}<p class="form-error">{{ form.slug.errors.0 }}</p>{% endif %}
    </div>
  </div>
  <div class="admin-form-field full-width">
    <label for="{{ form.description.id_for_label }}">{{ form.description.label }}</label>
    {{ form.description }}
    {% if form.description.help_text %}<p class="admin-form-help">{{ form.description.help_text|escape }}</p>{% endif %}
    {% if form.description.errors %}<p class="form-error">{{ form.description.errors.0 }}</p>{% endif %}
  </div>
  <div class="admin-form-row">
    <div class="admin-form-field">
      <label for="{{ form.address.id_for_label }}">{{ form.address.label }}</label>
      {{ form.address }}
      {% if form.address.help_text %}<p class="admin-form-help">{{ form.address.help_text|escape }}</p>{% endif %}
      {% if form.address.errors %}<p class="form-error">{{ form.address.errors.0 }}</p>{% endif %}
    </div>
    <div class="admin-form-field">
      <label for="{{ form.city.id_for_label }}">{{ form.city.label }}</label>
      {{ form.city }}
      {% if form.city.errors %}<p class="form-error">{{ form.city.errors.0 }}</p>{% endif %}
    </div>
  </div>
  <div class="admin-form-row">
    <div class="admin-form-field">
      <label for="{{ form.postal_code.id_for_label }}">{{ form.postal_code.label }}</label>
      {{ form.postal_code }}
      {% if form.postal_code.errors %}<p class="form-error">{{ form.postal_code.errors.0 }}</p>{% endif %}
    </div>
    <div class="admin-form-field">
      <label for="{{ form.country.id_for_label }}">{{ form.country.label }}</label>
      {{ form.country }}
      {% if form.country.errors %}<p class="form-error">{{ form.country.errors.0 }}</p>{% endif %}
    </div>
  </div>
  <div class="admin-form-row">
    <div class="admin-form-field">
      <label for="{{ form.contact_person.id_for_label }}">{{ form.contact_person.label }}</label>
      {{ form.contact_person }}
      {% if form.contact_person.help_text %}<p class="admin-form-help">{{ form.contact_person.help_text|escape }}</p>{% endif %}
      {% if form.contact_person.errors %}<p class="form-error">{{ form.contact_person.errors.0 }}</p>{% endif %}
    </div>
    <div class="admin-form-field">
      <label for="{{ form.contact_email.id_for_label }}">{{ form.contact_email.label }}</label>
      {{ form.contact_email }}
      {% if form.contact_email.errors %}<p class="form-error">{{ form.contact_email.errors.0 }}</p>{% endif %}
    </div>
  </div>
  <div class="admin-form-row">
    <div class="admin-form-field">
      <label for="{{ form.contact_phone.id_for_label }}">{{ form.contact_phone.label }}</label>
      {{ form.contact_phone }}
      {% if form.contact_phone.errors %}<p class="form-error">{{ form.contact_phone.errors.0 }}</p>{% endif %}
    </div>
    <div class="admin-form-field">
      <label for="{{ form.is_active.id_for_label }}">{{ form.is_active.label }}</label>
      {{ form.is_active }}
      {% if form.is_active.help_text %}<p class="admin-form-help">{{ form.is_active.help_text|escape }}</p>{% endif %}
      {% if form.is_active.errors %}<p class="form-error">{{ form.is_active.errors.0 }}</p>{% endif %}
    </div>
  </div>
  <div class="admin-form-field full-width">
    <label for="{{ form.customers.id_for_label }}">{{ form.customers.label }}</label>
    <div class="admin-form-checkboxes">
      {% for customer in form.customers %}
      <div class="admin-form-field admin-form-field--checkbox">
        <label class="admin-checkbox-label">
          {{ customer.tag }}
          <span>{{ customer.choice_label }}</span>
        </label>
      </div>
      {% endfor %}
    </div>
    {% if form.customers.help_text %}<p class="admin-form-help">{{ form.customers.help_text|escape }}</p>{% endif %}
    {% if form.customers.errors %}<p class="form-error">{{ form.customers.errors.0 }}</p>{% endif %}
  </div>
  <div class="admin-form-actions">
    <button type="submit" class="form-btn form-btn-primary form-btn--narrow">Save</button>
    <a href="{% url 'admin_app:admin_facility_list' %}" class="form-btn form-btn-secondary">Cancel</a>
    {% if facility %}
    <button type="button" class="form-btn form-btn-danger" data-delete-url="{% url 'admin_app:admin_facility_delete' facility.slug %}" data-delete-message="Are you sure you want to delete the facility '{{ facility.name }}'? This will also delete all racks, network devices, IP addresses, and documents associated with this facility.">Delete Facility</button>
    {% endif %}
  </div>
</form>
{% endblock %}
